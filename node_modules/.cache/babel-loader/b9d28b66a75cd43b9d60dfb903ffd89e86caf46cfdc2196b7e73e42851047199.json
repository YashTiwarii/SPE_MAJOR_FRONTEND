{"ast":null,"code":"var _jsxFileName = \"/home/yash/Documents/MadMuscle/frontend/src/pages/home.js\",\n  _s2 = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useGetUserID } from \"../hooks/useGetUserID\";\nimport { useCookies } from \"react-cookie\";\nimport { BsFillStarFill } from \"react-icons/bs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Home = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [workouts, setWorkouts] = useState([]);\n  const [savedWorkouts, setSavedWorkouts] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [cookies, _] = useCookies([\"access_token\"]);\n  const userID = useGetUserID();\n  const navigate = useNavigate();\n  const goToView = workout_id => {\n    _s();\n    console.log(workout_id);\n    localStorage.setItem(workout_id);\n    navigate(\"/view\"), {\n      //   state: { workoutID: workout_id, page: \"/\" },\n      // });\n    };\n    useEffect(() => {\n      const fetchWorkout = async () => {\n        try {\n          const response = await axios.get(\"http://localhost:3001/workouts\");\n          const ratedWorkouts = response.data.map(workout => {\n            const ratings = workout.ratings.map(r => r.rating);\n            const avgRating = ratings.reduce((total, rating) => total + rating, 0) / ratings.length;\n            return {\n              ...workout,\n              avgRating\n            };\n          });\n          setWorkouts(ratedWorkouts);\n          console.log(ratedWorkouts);\n        } catch (err) {\n          console.error(err);\n        }\n      };\n      const fetchSavedWorkouts = async () => {\n        try {\n          const response = await axios.get(`http://localhost:3001/workouts/savedWorkouts/ids/${userID}`);\n\n          //console.log(response.data.savedWorkouts);  \n          //console.log(response);\n\n          setSavedWorkouts(response.data.savedWorkouts);\n        } catch (err) {\n          console.error(err);\n        }\n      };\n      fetchWorkout();\n      if (cookies.access_token) fetchSavedWorkouts();\n    }, []);\n    const saveWorkout = async workoutID => {\n      try {\n        const response = await axios.put(\"http://localhost:3001/workouts\", {\n          workoutID,\n          userID\n        }, {\n          headers: {\n            authorization: cookies.access_token\n          }\n        });\n        setSavedWorkouts(response.data.savedWorkouts);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    const isWorkoutSaved = id => savedWorkouts === null || savedWorkouts === void 0 ? void 0 : savedWorkouts.includes(id);\n    const filteredWorkouts = workouts.filter(workout => workout.name && workout.name.toLowerCase().includes(searchTerm.toLowerCase()));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Workouts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search for a Workout...\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: filteredWorkouts.map(workout => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: workout.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: workout.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 25\n            }, this), workout.avgRating === 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: \"Not Rated\"\n            }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [workout.avgRating, /*#__PURE__*/_jsxDEV(BsFillStarFill, {\n                color: \"#ffd700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 92\n              }, this), \" \"]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => saveWorkout(workout._id),\n              disabled: isWorkoutSaved(workout._id),\n              children: isWorkoutSaved(workout._id) ? \"Saved\" : \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                goToView(workout._id);\n              },\n              children: [\" \", \"View\", \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: workout.imageUrl,\n            alt: workout.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 20\n          }, this)]\n        }, workout._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this);\n  };\n  _s(goToView, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n};\n_s2(Home, \"J5W0O6IHVZG6G4xWvm3VP/eK8F8=\", false, function () {\n  return [useCookies, useGetUserID, useNavigate];\n});\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useEffect","useState","axios","useNavigate","useGetUserID","useCookies","BsFillStarFill","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s2","_s","$RefreshSig$","workouts","setWorkouts","savedWorkouts","setSavedWorkouts","searchTerm","setSearchTerm","cookies","_","userID","navigate","goToView","workout_id","console","log","localStorage","setItem","fetchWorkout","response","get","ratedWorkouts","data","map","workout","ratings","r","rating","avgRating","reduce","total","length","err","error","fetchSavedWorkouts","access_token","saveWorkout","workoutID","put","headers","authorization","isWorkoutSaved","id","includes","filteredWorkouts","filter","name","toLowerCase","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","description","color","onClick","_id","disabled","src","imageUrl","alt","_c","$RefreshReg$"],"sources":["/home/yash/Documents/MadMuscle/frontend/src/pages/home.js"],"sourcesContent":["import {useEffect,useState} from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useGetUserID } from \"../hooks/useGetUserID\";\nimport { useCookies } from \"react-cookie\";\nimport { BsFillStarFill } from \"react-icons/bs\";\nexport const Home = () => {\n    const [workouts,setWorkouts] =useState([]);\n    const[savedWorkouts, setSavedWorkouts] = useState([]);\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const[cookies,_]= useCookies([\"access_token\"]);\n    const userID=useGetUserID();\n    const navigate = useNavigate();\n\n    const goToView = (workout_id) => {\n        console.log(workout_id);\n        localStorage.setItem(workout_id);\n         navigate(\"/view\"), {\n        //   state: { workoutID: workout_id, page: \"/\" },\n        // });\n      };\n\n    useEffect(() => {\n        const fetchWorkout = async() => {\n            try {\n              const response=  await axios.get(\"http://localhost:3001/workouts\")\n              const ratedWorkouts = response.data.map((workout) => {\n               const ratings = workout.ratings.map((r) => r.rating);\n               const avgRating =\n            ratings.reduce((total, rating) => total + rating, 0) /\n            ratings.length;\n          return { ...workout, avgRating };\n              });  \n                setWorkouts(ratedWorkouts);\n                \n                console.log(ratedWorkouts);\n                \n            } catch (err) {\n                console.error(err);\n            }\n        };\n\n\n        const fetchSavedWorkouts = async() => {\n            try {\n              const response=  await axios.get(`http://localhost:3001/workouts/savedWorkouts/ids/${userID}`);\n              \n              //console.log(response.data.savedWorkouts);  \n             //console.log(response);\n             \n             setSavedWorkouts(response.data.savedWorkouts);\n                \n            } catch (err) {\n                console.error(err);\n            }\n        };\n        fetchWorkout();\n         if(cookies.access_token)fetchSavedWorkouts();\n        \n    },[]);\n\nconst saveWorkout= async(workoutID)=>{\n    try {\n        const response=  await axios.put(\"http://localhost:3001/workouts\",{workoutID,userID},{headers:{authorization : cookies.access_token}});\n          \n          setSavedWorkouts(response.data.savedWorkouts);\n          \n      } catch (err) {\n          console.error(err);\n      }\n};\nconst isWorkoutSaved = (id) => savedWorkouts?.includes(id);\n\nconst filteredWorkouts = workouts.filter((workout) =>\nworkout.name &&workout.name.toLowerCase().includes(searchTerm.toLowerCase())\n);\n\n    return (<div>\n        <h1>Workouts</h1>\n        <input\n        type=\"text\"\n        placeholder=\"Search for a Workout...\"\n        value={searchTerm}\n        onChange={(e) => setSearchTerm(e.target.value)}\n      />\n        <ul>\n            {filteredWorkouts.map((workout)=>(\n                <li key = {workout._id}>\n                    <div>\n                        <h2>{workout.name}</h2>\n                        <h3>{workout.description}</h3>\n                        {workout.avgRating === 0? (<>Not Rated</>) : (<>{workout.avgRating}<BsFillStarFill color =\"#ffd700\"/> </>)}\n                        </div>\n                        <div>\n                        <button onClick={()=>saveWorkout(workout._id)}\n                        disabled={isWorkoutSaved(workout._id)}>\n                           { isWorkoutSaved(workout._id)?\"Saved\" : \"Save\"}\n                        </button>\n                        <button \n                        onClick={() => {\n                            goToView(workout._id);\n                        }}>\n                            {\" \"}\n                            View{\" \"}\n                        </button>\n                        </div>\n                   <img src={workout.imageUrl} alt={workout.name}/>\n                </li>\n            ))}\n        </ul>\n        </div>\n    );\n}\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}